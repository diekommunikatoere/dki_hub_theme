(()=>{"use strict";var e,i={961:()=>{const e=window.wp.blocks,i=window.wp.i18n,n=window.wp.element,a=window.wp.data,t=window.wp.blockEditor,s=window.wp.components,r=window.wp.coreData,o=window.ReactJSXRuntime,l=JSON.parse('{"UU":"dki-wiki/header-navigation"}'),c=(0,o.jsx)("svg",{id:"uuid-09bd83d1-6c60-40e3-8e1e-56b8ee8db5e6",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{class:"uuid-48c904e7-36f1-4dba-8d46-755b800a01e9",d:"M5.85,17.1c.85-.65,1.8-1.16,2.85-1.54s2.15-.56,3.3-.56,2.25.19,3.3.56,2,.89,2.85,1.54c.58-.68,1.04-1.46,1.36-2.33s.49-1.79.49-2.78c0-2.22-.78-4.1-2.34-5.66s-3.45-2.34-5.66-2.34-4.1.78-5.66,2.34c-1.56,1.56-2.34,3.45-2.34,5.66,0,.98.16,1.91.49,2.78s.78,1.64,1.36,2.33ZM12,13c-.98,0-1.81-.34-2.49-1.01s-1.01-1.5-1.01-2.49.34-1.81,1.01-2.49,1.5-1.01,2.49-1.01,1.81.34,2.49,1.01,1.01,1.5,1.01,2.49-.34,1.81-1.01,2.49-1.5,1.01-2.49,1.01ZM12,22c-1.38,0-2.68-.26-3.9-.79s-2.28-1.24-3.18-2.14-1.61-1.96-2.14-3.18-.79-2.52-.79-3.9.26-2.68.79-3.9,1.24-2.28,2.14-3.18,1.96-1.61,3.18-2.14,2.52-.79,3.9-.79,2.68.26,3.9.79,2.28,1.24,3.18,2.14,1.61,1.96,2.14,3.18.79,2.52.79,3.9-.26,2.68-.79,3.9-1.24,2.28-2.14,3.18-1.96,1.61-3.18,2.14-2.52.79-3.9.79ZM12,20c.88,0,1.72-.13,2.5-.39s1.5-.63,2.15-1.11c-.65-.48-1.37-.85-2.15-1.11-.78-.26-1.62-.39-2.5-.39s-1.72.13-2.5.39c-.78.26-1.5.63-2.15,1.11.65.48,1.37.85,2.15,1.11s1.62.39,2.5.39ZM12,11c.43,0,.79-.14,1.08-.43.28-.28.43-.64.43-1.08s-.14-.79-.43-1.08c-.28-.28-.64-.43-1.08-.43s-.79.14-1.08.43-.43.64-.43,1.08.14.79.43,1.08.64.43,1.08.43Z"})});(0,e.registerBlockType)(l.UU,{edit:function({attributes:l,setAttributes:c}){const{selectedMenuId:d}=l,[p,v]=(0,n.useState)(null),[h,g]=(0,a.useSelect)(e=>[e(r.store).getEntityRecords("postType","wp_navigation"),e(r.store).isResolving("getEntityRecords",["postType","wp_navigation"])]),u=(0,a.useSelect)(e=>d?e(r.store).getEntityRecord("postType","wp_navigation",d):null,[d]),m=(0,n.useMemo)(()=>{if(!u)return[];const i=(0,e.parse)(u.content.raw).filter(e=>"core/navigation-link"===e.name).map(e=>({id:e.clientId,title:e.attributes.label,url:e.attributes.url,target:e.attributes.target}));return c({menuItems:i}),i},[u]);JSON.stringify(l.menuItems)!==JSON.stringify(m)&&c({menuItems:m});const w=h?h.map(e=>({label:e.title.raw,value:e.id})):[];(0,n.useEffect)(()=>{(async()=>{try{const e=await fetch("/wp-json/wp/v2/users/me",{credentials:"same-origin",headers:{"X-WP-Nonce":wpApiSettings?.nonce||""}});if(e.ok){const i=await e.json();v(i)}}catch(e){console.error("Error fetching user data:",e),v({name:"Current User",avatar_urls:{32:"https://via.placeholder.com/32"}})}})()},[]);const x=(0,t.useBlockProps)({className:"header-navigation-editor"});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.InspectorControls,{children:(0,o.jsx)(s.PanelBody,{title:(0,i.__)("Navigation Settings","header-navigation"),initialOpen:!0,children:g?(0,o.jsx)(s.Spinner,{}):(0,o.jsx)(s.SelectControl,{label:(0,i.__)("Select Navigation Menu","header-navigation"),value:d,options:w,onChange:e=>{c({selectedMenuId:parseInt(e,10)||0})}})})}),(0,o.jsx)("div",{...x,children:0===d?(0,o.jsx)(s.Placeholder,{icon:"menu",label:(0,i.__)("Header Navigation","header-navigation"),instructions:(0,i.__)("Select a navigation menu from the block settings panel to get started.","header-navigation")}):(0,o.jsx)("div",{className:"header-navigation-wrapper",children:(0,o.jsxs)("div",{className:"header-navigation-wrapper-inner",children:[(0,o.jsxs)("a",{href:"#",className:"header-navigation-logo-link","aria-label":"Zur Startseite",style:{pointerEvents:"none"},children:[(0,o.jsx)("img",{src:"/wp-content/uploads/2024/06/DKI_Wiki_logo.svg",className:"header-navigation-logo"}),(0,o.jsx)("span",{children:"die kommunikatöre® Hub"})]}),(0,o.jsxs)("div",{className:"header-navigation-preview",children:[(0,o.jsx)("div",{className:"navigation-menu-preview",children:u?(0,o.jsxs)("ul",{className:"menu-items-preview",children:[m.map(e=>(0,o.jsx)("li",{className:"menu-item-preview",children:e.title},e.id)),u.length>5&&(0,o.jsx)("li",{className:"menu-item-preview more-items",children:(0,i.__)("...and %d more items","header-navigation").replace("%d",u.length-5)})]}):(0,o.jsxs)("div",{className:"menu-loading",children:[(0,o.jsx)(s.Spinner,{}),(0,i.__)("Loading menu items...","header-navigation")]})}),(0,o.jsx)("div",{className:"profile-nav-preview",children:p?(0,o.jsx)("div",{className:"profile-preview",children:(0,o.jsx)("img",{src:"/wp-content/uploads/ultimatemember/"+p.id+"/profile_photo-190x190.jpg"||0,alt:(0,i.__)(`Profilbild von ${p.name}`,"header-navigation"),width:"32",height:"32",className:"avatar-preview"})}):(0,o.jsx)("div",{className:"profile-loading",children:(0,o.jsx)(s.Spinner,{})})})]})]})})})]})},icon:c})}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return i[e](s,s.exports,a),s.exports}a.m=i,e=[],a.O=(i,n,t,s)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,t,s]=e[d],o=!0,l=0;l<n.length;l++)(!1&s||r>=s)&&Object.keys(a.O).every(e=>a.O[e](n[l]))?n.splice(l--,1):(o=!1,s<r&&(r=s));if(o){e.splice(d--,1);var c=t();void 0!==c&&(i=c)}}return i}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,t,s]},a.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),(()=>{var e={57:0,350:0};a.O.j=i=>0===e[i];var i=(i,n)=>{var t,s,[r,o,l]=n,c=0;if(r.some(i=>0!==e[i])){for(t in o)a.o(o,t)&&(a.m[t]=o[t]);if(l)var d=l(a)}for(i&&i(n);c<r.length;c++)s=r[c],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(d)},n=globalThis.webpackChunkheader_navigation=globalThis.webpackChunkheader_navigation||[];n.forEach(i.bind(null,0)),n.push=i.bind(null,n.push.bind(n))})();var t=a.O(void 0,[350],()=>a(961));t=a.O(t)})();